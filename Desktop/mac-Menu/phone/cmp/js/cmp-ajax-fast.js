"undefined"==typeof cmp&&(cmp={},cmp.multipleWebview=!1),cmp.callbackId=Math.floor(2e9*Math.random()),cmp.callbacks={},cmp.ajaxFilter;var isCMPShell=navigator.userAgent.indexOf("seeyonCordova")>-1,isCMPAndroid=navigator.userAgent.indexOf("Android")>-1,isM3W=navigator.userAgent.indexOf("seeyonCordova")>-1&&/^(https*:\/\/)*([a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\.?):*([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])\/seeyon\//.test(window.location.href);"undefined"==typeof window.CMPNativeBridge&&isCMPShell&&(window.CMPNativeBridge={smRequest:function(a,b,c){var d={service:a,action:b,data:c};d=JSON.stringify(d);var e=new window.XMLHttpRequest,f="http://127.0.0.1/nativeservice";e.open("POST",f,!1),e.send(d);var g=e.responseText;return g}}),"undefined"==typeof cmp.storage&&(cmp.storage={},cmp.storage.save=function(a,b,c){c?isCMPShell&&cmp.multipleWebview?window.CMPNativeBridge.smRequest("CMPStoragePlugin","setItem",_storageTranseParams([{key:a,data:b,scope:!0}])):window.sessionStorage.setItem(a,b):window.localStorage.setItem(a,b)},cmp.storage.get=function(a,b){return b?isCMPShell&&cmp.multipleWebview?window.CMPNativeBridge.smRequest("CMPStoragePlugin","getItem",_storageTranseParams([{key:a,scope:!0}]))||null:window.sessionStorage.getItem(a):window.localStorage.getItem(a)},cmp.storage["delete"]=function(a,b){b?isCMPShell&&cmp.multipleWebview?window.CMPNativeBridge.smRequest("CMPStoragePlugin","removeItem",_storageTranseParams([{key:a,scope:!0}])):window.sessionStorage.removeItem(a):window.localStorage.removeItem(a)},cmp.storage.deleteAll=function(a){a?isCMPShell&&cmp.multipleWebview?window.CMPNativeBridge.smRequest("CMPStoragePlugin","clear",_storageTranseParams([{scope:!0}])):window.sessionStorage.clear():window.localStorage.clear()},cmp.storage.size=function(a){return a?isCMPShell&&cmp.multipleWebview?window.CMPNativeBridge.smRequest("CMPStoragePlugin","size",_storageTranseParams([{scope:!0}]))||null:window.sessionStorage.length:window.localStorage.length},cmp.storage.removeCacheData=function(a,b){cmp.storage["delete"](a,b)}),_storageTranseParams=function(a){return a=isCMPAndroid?JSON.stringify(a):a},CMPFASTAJAXCACHE=[],function(a){function b(b){var c=b.error;b.error=function(b){var d,e,f;if(b)if("object"==typeof b){if(d=b.code,e=b.message,!d){var g=b.responseText;if(f=b.status,g)try{b=JSON.parse(g),d=b.code,d?d=parseInt(d):(d=f,b.code=d)}catch(h){}}}else try{b=JSON.parse(b),d=b.code,e=b.message,d=parseInt(d)}catch(h){}"undefined"!=typeof d&&"undefined"!=typeof e&&(b={code:d,message:e,status:f}),a.ajaxFilter&&"function"==typeof a.ajaxFilter?a.ajaxFilter(b):c&&"function"==typeof c?c(b):a.errorHandler(b)}}var c="application/json",d="text/html",e=/^(?:text|application)\/javascript/i,f=/^(?:text|application)\/xml/i,g=/^\s*_/,h=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/;a.noop=function(){},a.ajaxSettings={type:"GET",beforeSend:a.noop,success:a.noop,error:a.noop,complete:a.noop,context:null,cmpReady2Fire:!1,xhr:function(a){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:c,xml:"application/xml, text/xml",html:d,text:"text/plain"},timeout:3e4,repeat:!1,repeatTime:3,repeatTimer:5e3,processData:!0,cache:!0};var i=function(a,b){var c=b.context;return b.beforeSend.call(c,a,b)===!1?!1:void 0},j=function(a,b,c){c.cmpReady2Fire?"undefined"!=typeof CMPREADYMARK&&1==CMPREADYMARK?(c.success.call(c.context,a,"success",b),l("success",b,c)):CMPFASTAJAXCACHE.push({successMark:!0,data:a,xhr:b,success:c.success}):(c.success.call(c.context,a,"success",b),l("success",b,c))},k=function(a,b,c,d){if(d.cmpReady2Fire)if("undefined"!=typeof CMPREADYMARK&&1==CMPREADYMARK)d.error.call(d.context,c,b,a),l(b,c,d);else{var e={readyState:c.readyState,response:c.response,responseText:c.responseText,responseType:c.responseType,responseURL:c.responseURL,responseXML:c.responseXML,status:c.status,statusText:c.statusText,timeout:c.timeout};isCMPShell&&isCMPAndroid&&(e.code=c.code,e.message=c.message),CMPFASTAJAXCACHE.push({errorMark:!0,xhr:e,type:b,errorMsg:a,error:d.error})}else d.error.call(d.context,c,b,a),l(b,c,d)},l=function(a,b,c){c.complete.call(c.context,b,a)},m=function(a,b,c,d){var e=_isArray(b),f=0==Object.keys(b).length;_each(b,function(b,g){d&&(b=c?d:d+"["+(f||"object"==typeof g||_isArray(g)?b:"")+"]"),!d&&e?a.add(g.name,g.value):_isArray(g)||!c&&"object"==typeof g?m(a,g,c,b):a.add(b,g)})},n=function(b){b.processData&&b.data&&"string"!=typeof b.data&&(b.data=a.param(b.data,b.traditional)),!b.data||b.type&&"GET"!==b.type.toUpperCase()||(b.url=o(b.url,b.data),b.data=void 0)},o=function(a,b){return""===b?a:(a+"&"+b).replace(/[&?]{1,2}/,"?")},p=function(a){return a&&(a=a.split(";",2)[0]),a&&(a===d?"html":a===c?"json":e.test(a)?"script":f.test(a)&&"xml")||"text"},q=function(c,d){"object"==typeof c&&(d=c,c=void 0);var e=d||{};b(e),e.url=c||e.url;for(var f in a.ajaxSettings)void 0===e[f]&&(e[f]=a.ajaxSettings[f]);n(e);var g=e.dataType;e.cache!==!1&&(d&&d.cache===!0||"script"!==g)||(e.url=o(e.url,"_="+a.now()));var i,j=e.accepts[g],k={},l=function(a,b){k[a]=b},m=/^([\w-]+:)\/\//.test(e.url)?RegExp._1:window.location.protocol,p=e.xhr(e),q=window.location.href,s=h.exec(q.toLowerCase())||[];if(null==e.crossDomain&&(i=h.exec(e.url.toLowerCase()),e.crossDomain=!(!i||i[1]===s[1]&&i[2]===s[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(s[3]||("http:"===s[1]?"80":"443")))),e.crossDomain||k["X-Requested-With"]||l("X-Requested-With","XMLHttpRequest"),l("Accept",j||"*/*"),(e.contentType||e.contentType!==!1&&e.data&&"GET"!==e.type.toUpperCase())&&l("Content-Type",e.contentType||"application/x-www-form-urlencoded; charset=UTF-8"),e.headers)for(var u in e.headers)l(u,e.headers[u]);isCMPShell&&isCMPAndroid&&!isM3W&&e.remote&&"undefined"!=typeof window.CMPNativeBridge.asmRequest?t(e,k):r(p,e,k,m)},r=function(b,c,d,e){var f,h=c.dataType,l=c.accepts[h];if((l=c.mimeType||l)&&(l.indexOf(",")>-1&&(l=l.split(",",2)[0]),b.overrideMimeType&&b.overrideMimeType(l)),b.onreadystatechange=function(){if(4===b.readyState){b.onreadystatechange=a.noop,clearTimeout(f);var i,l=!1;if(b.status>=200&&b.status<300||304===b.status||0===b.status&&"file:"===e){h=h||p(c.mimeType||b.getResponseHeader("content-type")),h=h.toLowerCase(),i=b.responseText;try{"script"===h?(1,eval)(i):"xml"===h?i=b.responseXML:"json"===h&&(i=g.test(i)?null:JSON.parse(i))}catch(m){l=m}l?k(l,"parsererror",b,c):j(i,b,c)}else c.repeat&&c.repeatTime&&0==b.status?(b.abort(),setTimeout(function(){s(c,d,e),c.repeatTime--},c.repeatTimer)):(k(b.statusText||null,b.status?"error":"abort",b,c),b.abort())}},i(b,c)===!1)return b.abort(),k(null,"abort",b,c),b;if(c.xhrFields)for(var m in c.xhrFields)b[m]=c.xhrFields[m];var n="async"in c?c.async:!0;b.open(c.type.toUpperCase(),c.url,n,c.username,c.password);for(var m in d)b.setRequestHeader(m,d[m]);return c.timeout>0&&(f=setTimeout(function(){b.onreadystatechange=a.noop,b.abort(),k(null,"timeout",b,c)},c.timeout)),b.send(c.data?c.data:null),b},s=function(a,b,c){var d=new window.XMLHttpRequest;r(d,a,b,c)},t=function(b,c){var d=a.callbackId++;a.callbacks[d]={success:function(a){j(a,a,b)},error:function(a){k(a,"error",{code:a.code,message:a.message},b)},dataType:b.dataType},window.CMPNativeBridge.asmRequest("CMPFastajaxPlugin","send",_storageTranseParams({url:b.url,timeout:b.timeout,data:b.data,type:b.type.toUpperCase(),headers:c,callbackId:d,callback:"cmp.nativeAjaxCallback"}))};cmp.nativeAjaxCallback=function(a,b){var c=cmp.callbacks[a],d=c.success,e=c.error,f=c.dataType;if(delete cmp.callbacks[a],b.success){var g=b.data;if("script"===f)(1,eval)(g);else if("json"===f)try{g=JSON.parse(g)}catch(h){}d.call(this,g)}else{var i=b.error;try{i=JSON.parse(i)}catch(h){}e.call(this,i)}},a.param=function(a,b){var c=[];return c.add=function(a,b){this.push(encodeURIComponent(a)+"="+encodeURIComponent(b))},m(c,a,b),c.join("&").replace(/%20/g,"+")},_each=function(a,b,c){if(!a)return this;if("number"==typeof a.length)[].every.call(a,function(a,c){return b.call(a,c,a)!==!1});else for(var d in a)if(c){if(a.hasOwnProperty(d)&&b.call(a[d],d,a[d])===!1)return a}else if(b.call(a[d],d,a[d])===!1)return a;return this},_isArray=Array.isArray||function(a){return a instanceof Array},a.ajax=a.fastAjax=function(a,b,c){("object"==typeof a&&"undefined"==typeof a.isCache||"string"==typeof a)&&(c=b,b=a,a=void 0),"object"==typeof b&&(c=b,b=void 0),q(b,c)},a.token=function(){var a="";return localStorage.getItem("CMP_V5_TOKEN")&&(a=localStorage.getItem("CMP_V5_TOKEN")),a}(),a.seeyonbasepath=function(){var a=document.location,b=a.origin,c=a.href,d=c.replace(b+"/","");if(d=d.substring(0,d.indexOf("/")),navigator.userAgent.indexOf("seeyonCordova")>-1&&-1!=b.indexOf("file:/")){var e=localStorage.getItem("online-debug-url");return e+"/seeyon"}return b+"/"+d}(),"undefined"==typeof a.href&&(a.href={},a.historyParamsCache={},a.href.getParam=function(b){var c,d=sessionStorage.getItem("cmp-href-history"),e=sessionStorage.getItem("pageURL"),f=localStorage.getItem("cmp-href-history"),g=sessionStorage.getItem("cmp-href-goParams");if(f){c=JSON.parse(f).data,localStorage.removeItem("cmp-href-history");var h=window.location.href;d=[];var i={};i.data=c,i.url=h,i.openWebviewMark="openWebviewMark",d.push(i),sessionStorage.setItem("cmp-href-history",JSON.stringify(d))}else if(e)c=sessionStorage.getItem(e+"_paramKey"),sessionStorage.removeItem("pageURL"),sessionStorage.removeItem(e+"_paramKey");else if(g&&(!d||d&&!JSON.parse(d).length))c=g;else{if(d)try{d=JSON.parse(d)}catch(j){d=[]}else d=[];var i=d[d.length-1];i&&(c=i.data,c=JSON.stringify(c))}if(!c)return void 0;try{return"string"==typeof c&&(c=JSON.parse(c)),a.historyParamsCache.data=c,b?c[b]:c}catch(j){return a.historyParamsCache.data=c,c}})}(cmp),function(){window.fI18nData=window.fI18nData||{},fI18nData.errorHandlerI18n={"zh-CN":{tips:"提示",ok:"确认",logonFailureMsg:"由于服务器或者你长时间未做操作，现已登录失效，请点击返回登录页按钮重新登录",logonFailureTitile:"登录失效",logonFailureBtn:"返回登录页",requestFailureMsg:"请求数据失败",requestErrorMsg_noContent:"未将错误信息返回",connectFailed:"连接服务器失败",error:"错误",returnPrePage:"返回上一页",networkLose:"当前网络不可用，请检查您的网络设置",serverError:"服务器出小差了，请稍候重试"},"zh-TW":{tips:"提示",ok:"確認",logonFailureMsg:"由於服務器或者你長時間未做操作，現已登錄失效，請點擊返回登陸頁按鈕重新登陸",logonFailureTitile:"登錄失效",logonFailureBtn:"返回登錄頁",requestFailureMsg:"請求數據失敗",requestErrorMsg_noContent:"未將錯誤信息返回",connectFailed:"連接服務器失敗",error:"錯誤",returnPrePage:"返回上一頁",networkLose:"當前網絡不可用，請檢查您的網絡設置",serverError:"服務器出小差錯，請稍後重試"},en:{tips:"Prompt",ok:"OK",logonFailureMsg:"Login failed,please click GO LOGIN PAGE to try login again",logonFailureTitile:"Login failure",logonFailureBtn:"GO LOGIN PAGE",requestFailureMsg:"Request failed",requestErrorMsg_noContent:"Can't receive request error info",connectFailed:"Connect failed",error:"Error",returnPrePage:"Return previous page",networkLose:"This network can't work,please check your network state",serverError:"The server occur error,please try it later"}}}(),function(a){function b(b,d){a.mark.mark1004(),c(d)}function c(a,b){var c=b?d:null;cmp.platform.CMPShell?cordova.exec(c,function(){},"CMPServerPlugin","showSessionInvalidAlert",[{title:fI18nData.errorHandlerI18n[i].logonFailureTitile,content:a,buttonTitle:fI18nData.errorHandlerI18n[i].logonFailureBtn}]):(k||cmp.notification.alert(a,function(){cmp.platform.wechatOrDD&&cmp.href.closePage(),k=!1},fI18nData.errorHandlerI18n[i].logonFailureTitile,fI18nData.errorHandlerI18n[i].logonFailureBtn),k=!0)}function d(){cordova.exec(function(){cmp.setCookie()},function(){},"CMPServerPlugin","clearLoginResult",[{}])}function e(a){try{cmp.notification.toast(a,"center")}catch(b){alert(a)}}function f(){cmp.connection.getNetworkType({success:function(a){"none"==a.toLocaleLowerCase()?cmp.notification.toast(fI18nData.errorHandlerI18n[i].networkLose,"center"):cmp.notification.toast(fI18nData.errorHandlerI18n[i].serverError,"center")}})}function g(){try{cmp.notification.alert(fI18nData.errorHandlerI18n[i].requestErrorMsg_noContent,null,fI18nData.errorHandlerI18n[i].requestFailureMsg,fI18nData.errorHandlerI18n[i].ok)}catch(a){alert(fI18nData.errorHandlerI18n[i].requestErrorMsg_noContent)}}function h(a){if(!k)try{cmp.notification.alert(fI18nData.errorHandlerI18n[i].networkLose,function(){k=!1,"function"==typeof a&&a()},fI18nData.errorHandlerI18n[i].tips,fI18nData.errorHandlerI18n[i].ok)}catch(b){alert(fI18nData.errorHandlerI18n[i].networkLose)}k=!0}var i=cmp.language,j={unauthorized:401,outOfConcurrency:1001,outOfConcurrency_account:1002,forceOffline:1003,loginOther:1004,modifyPassword:1005,accountOffline:1006,loginOther2:1007,v5m3close:1010,connectFailed:-1001,iosnetworklose0:-1004,iosnetworklose1:-1005,isonetworklose2:-1009,v5close0:50011,v5close1:50022,pageError:9001,jssdkNotFound:9002,unclearError:9003,networkLose:9004},k=!1,l=function(){function a(a,b,c){this.code=a,this.message=b,this.detail=c}return a.prototype.handleV5Error=function(a){switch(cmp.dialog.loading(!1),this.code){case j.unauthorized:case j.outOfConcurrency:case j.outOfConcurrency_account:case j.forceOffline:case j.modifyPassword:case j.accountOffline:case j.v5m3close:m(this.code,this.message);break;case j.loginOther:case j.loginOther2:b(this.code,this.message);break;case j.connectFailed:case j.iosnetworklose0:case j.iosnetworklose1:case j.isonetworklose2:case j.v5close0:case j.v5close1:e(this.message);break;case j.pageError:n();break;case j.jssdkNotFound:f();break;case j.unclearError:g();break;case j.networkLose:h(a)}},a}(),m=function(a,b){switch(a){case 401:b=b||fI18nData.errorHandlerI18n[i].logonFailureMsg;break;case 1001:b=b||"用户登陆超出并发数限制";break;case 1002:b=b||"用户登陆超出单位并发数限制";break;case 1003:b=b||"管理员踢人";break;case 1005:b=b||"密码已被修改，请重新登陆";break;case 1006:b=b||"您的账号已被下线!";break;case 1010:b=b||"被迫下线，原因：与服务器失去连接"}b&&c(b,!0)},n=function(){var a,b="undefined"!=typeof cmpPageErrorMsg?cmpPageErrorMsg:"页面发生错误!程序中断!",c=cmpCommonPageBackBtn.getAttribute("onclick")||cmpCommonPageBackBtn.getAttribute("ondblclick")?!0:!1;if("undefined"!=typeof jQuery&&(a="undefined"!=typeof $._data($(".cmpCommonPageBackBtn")[0],"events")?!0:!1),!a&&!c)if(cmp&&cmp.href.back)cmp.notification.alert(b,function(){cmp.platform.CMPShell||cmp.platform.wechatOrDD?cmp.href.back():window.history.back()},fI18nData.errorHandlerI18n[i].error,fI18nData.errorHandlerI18n[i].returnPrePage);else if(alert(b),window.history.length>1)window.history.back();else if(cmp.platform.wechat)try{WeixinJSBridge.invoke("closeWindow",{},function(a){})}catch(d){}},o=[401,1001,1002,1003,1004,1005,1006,1007,-1001,-1004,-1005,-1009,50011,50022,1010];a.errorHandler=function(b,c){try{var d,e,f;if("object"==typeof b){if(d=b.code,e=b.message,!d){var g=b.responseText;if(f=b.status,g)try{d=a.parseJSON(g).code}catch(h){}}}else try{b=a.parseJSON(b),d=b.code,e=b.message}catch(h){}if(d=parseInt(d),isNaN(d)){if(0==f){var i=new l(9004);return i.handleV5Error(c),!0}}else{if(-1!=o.indexOf(d)){try{cmp.connection.getNetworkType({success:function(a){if("none"==a.toLocaleLowerCase()){var b=new l(9004);b.handleV5Error(c)}else{var b=new l(d,e);b.handleV5Error()}}})}catch(h){var i=new l(d,e);i.handleV5Error()}return!0}if(9001==d||9002==d){var i=new l(d);return i.handleV5Error(),!0}}}catch(h){}return!1}}(cmp);